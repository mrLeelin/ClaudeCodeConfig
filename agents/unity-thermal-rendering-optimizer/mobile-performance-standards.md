# 手机游戏性能标准和目标

## 目录
1. [性能目标概览](#性能目标概览)
2. [不同设备等级的标准](#不同设备等级的标准)
3. [不同游戏类型的标准](#不同游戏类型的标准)
4. [性能指标详解](#性能指标详解)
5. [优化目标制定](#优化目标制定)
6. [测试设备清单](#测试设备清单)
7. [性能评分体系](#性能评分体系)

---

## 性能目标概览

### 核心目标

```
优先级 1（必须满足）：
✅ 帧率稳定性：不低于目标帧率的 80%
✅ 设备温度：不超过 40°C，不触发热节流
✅ 不卡顿：主线程帧率波动不超过 20%

优先级 2（重要）：
✅ 内存稳定：长时间运行内存曲线不上升
✅ GC 平稳：每分钟 GC 次数 < 5 次
✅ 电池消耗：30 分钟游戏耗电 < 15%

优先级 3（可选）：
✅ 画质效果：在满足前两项基础上尽量好看
✅ 加载速度：场景加载 < 3 秒
✅ 响应延迟：输入响应 < 50ms
```

### 性能等级定义

```
优秀（A 级）：
- 帧率稳定（> 90% 时间）
- 无卡顿
- 无发热
- 用户体验流畅

良好（B 级）：
- 帧率基本稳定（> 75% 时间）
- 偶尔卡顿（< 5% 时间）
- 偶尔温热
- 用户基本满意

可接受（C 级）：
- 帧率波动明显（> 60% 时间）
- 定期卡顿（5-15% 时间）
- 长时间游戏发热
- 用户能忍受

不可接受（D 级）：
- 帧率经常掉落
- 频繁卡顿
- 长时间发热严重
- 用户投诉
```

---

## 不同设备等级的标准

### 低端设备标准（2-3GB 内存）

典型设备：
- Android：小米 Redmi Note 7、iPhone SE（第一代）
- 芯片：高通骁龙 600-700 系列、A11+

**性能目标**：

| 指标 | 目标 | 极限 |
|------|------|------|
| **目标帧率** | 30 fps | 不低于 25 fps |
| **帧时间** | < 33.3 ms | < 40 ms |
| **GC.Alloc** | < 100 KB/frame | < 150 KB/frame |
| **堆内存** | < 400-500 MB | < 600 MB |
| **CPU 占用** | < 70% | < 85% |
| **GPU 占用** | < 75% | < 90% |
| **设备温度** | < 38°C | < 42°C |
| **发热时间** | < 30 分钟 | < 60 分钟 |

**约束条件**：
- 关闭高端特效（后处理、实时阴影等）
- 粒子数量 < 50
- Draw Call < 80（合批后）
- 纹理分辨率 < 2K

**测试场景**：
- 菜单界面（1 分钟）
- 正常游戏（10 分钟）
- 高负载场景（5 分钟，如多敌人）

### 中端设备标准（4-6GB 内存）

典型设备：
- Android：小米 10、三星 A71、iPhone 12
- 芯片：高通骁龙 800-850 系列、A14+

**性能目标**：

| 指标 | 目标 | 极限 |
|------|------|------|
| **目标帧率** | 60 fps | 不低于 50 fps |
| **帧时间** | < 16.7 ms | < 20 ms |
| **GC.Alloc** | < 100 KB/frame | < 150 KB/frame |
| **堆内存** | < 800 MB - 1 GB | < 1.2 GB |
| **CPU 占用** | < 60% | < 75% |
| **GPU 占用** | < 70% | < 85% |
| **设备温度** | < 39°C | < 42°C |
| **发热时间** | > 60 分钟稳定 | < 40°C |

**约束条件**：
- 可以启用部分特效（简化后处理）
- 粒子数量 < 200
- Draw Call < 120（合批后）
- 纹理分辨率 < 4K

**测试场景**：
- 菜单界面（2 分钟）
- 正常游戏（20 分钟）
- 高负载场景（10 分钟）

### 高端设备标准（8GB+ 内存）

典型设备：
- Android：小米 12、三星 S22、iPhone 14+
- 芯片：骁龙 8 Gen 1+、A16+

**性能目标**：

| 指标 | 目标 | 极限 |
|------|------|------|
| **目标帧率** | 60 fps | 不低于 55 fps |
| **帧时间** | < 16.7 ms | < 18 ms |
| **GC.Alloc** | < 50 KB/frame | < 100 KB/frame |
| **堆内存** | < 1.5 GB | < 2 GB |
| **CPU 占用** | < 50% | < 65% |
| **GPU 占用** | < 60% | < 75% |
| **设备温度** | < 38°C | < 40°C |
| **发热时间** | > 120 分钟稳定 | < 38°C |

**约束条件**：
- 可以启用所有特效
- 粒子数量可以较多（< 500）
- Draw Call < 150（合批后）
- 纹理分辨率可以是 4K

**测试场景**：
- 菜单界面（2 分钟）
- 正常游戏（30 分钟）
- 高负载场景（15 分钟）

---

## 不同游戏类型的标准

### 卡牌游戏

特点：低 GPU 负载，高 UI 更新频率，交互频繁

**性能要求**：

| 指标 | 标准 | 说明 |
|------|------|------|
| **帧率** | 30 fps（菜单），60 fps（滑动） | UI 不需要 60，但滑动需要 |
| **GC.Alloc** | < 100 KB/frame | UI 更新会产生分配 |
| **Canvas 重建** | < 5% 时间 | Canvas 批处理优化很关键 |
| **响应延迟** | < 50 ms | 按钮点击响应 |
| **加载时间** | < 2 秒 | 卡牌数据加载 |

**优化重点**：
1. Canvas 分层和缓存
2. Text 的 String 池
3. UI 动画优化
4. 网络数据处理

### ARPG（动作角色扮演）

特点：高 CPU 和 GPU 负载，物理和 AI 计算多，实时性要求高

**性能要求**：

| 指标 | 标准 | 说明 |
|------|------|------|
| **帧率** | 60 fps（必须） | 战斗流畅度关键 |
| **帧率稳定性** | > 95% 时间 | 帧率波动影响操控 |
| **GC.Alloc** | < 100 KB/frame | AI 和物理会分配 |
| **CPU** | < 15 ms（60 fps） | AI 更新和物理计算 |
| **GPU** | < 12 ms（60 fps） | 复杂场景渲染 |
| **物理 Tick** | < 3 ms | 碰撞和 Rigidbody |

**优化重点**：
1. AI 更新频率和优化
2. 物理计算优化
3. 特效粒子系统
4. Draw Call 优化

### FPS（第一人称射击）

特点：极高的实时性要求，低延迟至关重要，GPU 压力最大

**性能要求**：

| 指标 | 标准 | 说明 |
|------|------|------|
| **帧率** | 60 fps（最低），90+ 优先 | 低延迟是关键 |
| **帧率稳定性** | > 98% 时间 | 帧率波动影响射击准度 |
| **输入延迟** | < 30 ms | 从输入到渲染 |
| **GC 暂停时间** | < 5 ms | 不能中断游戏 |
| **GPU** | < 12 ms（60 fps） | 高分辨率、复杂渲染 |

**优化重点**：
1. 帧率稳定性（最关键）
2. GC 压力最小化
3. 输入响应延迟
4. GPU 效率

---

## 性能指标详解

### 帧时间和帧率

```
帧时间 = 1000 ms / 帧率（fps）

30 fps：33.3 ms/frame
60 fps：16.7 ms/frame
90 fps：11.1 ms/frame
120 fps：8.3 ms/frame

分析：
- 如果某一帧耗时 50 ms（超过目标 16.7 ms），会出现卡顿
- 连续 5 帧低于目标帧率 = 0.08 秒的明显卡顿（用户能感知）
- 目标是 > 95% 的帧都在预算内
```

### CPU 和 GPU 时间预算

```
总帧时间 = CPU 时间 + GPU 时间 + 同步时间

60 fps 下（16.7 ms 预算）：
- CPU 最多用 8 ms（50%）
- GPU 最多用 8 ms（50%）
- 同步最多用 0.7 ms

如果 CPU 用了 10 ms，GPU 用了 8 ms：
实际帧时间 = 18.7 ms > 16.7 ms → 卡顿

这时即使 GPU 很闲，因为 CPU 还在计算，也要等待
```

### GC.Alloc（垃圾回收压力）

```
GC.Alloc = 这一帧分配的托管堆内存大小

何时产生 GC：
- 当 GC 堆占用 > 某个阈值时
- Unity 会执行一次 Full GC（mark + sweep）
- 这次 GC 会导致卡顿（可能 50-200 ms）

目标 < 100 KB/frame 原因：
- 如果每帧 100 KB
- 10 秒内分配 1 MB
- ~100 秒内分配 10 MB
- 这时触发 GC，导致卡顿

最坏的情况：
- 如果 GC 暂停 100 ms（在 60 fps 下失去 6 帧）
- 游戏会明显卡顿
```

### 内存占用

```
堆内存占用目标：

低端（2GB）：< 500 MB
  剩余 1.5 GB 用于系统和其他应用

中端（4GB）：< 1 GB
  剩余 3 GB，安全

高端（8GB）：< 1.5 GB
  留有余量

为什么要控制内存：
1. 防止 OOM 崩溃
2. 避免系统杀死应用
3. 减少卡顿（GC 压力低）
4. 减少发热（内存操作少）
```

### 设备发热

```
发热源：
- CPU：高频计算（物理、AI、脚本）
- GPU：高频渲染（特效、粒子、填充率）
- 充电：如果边玩边充电

温度目标：
25°C（室温） + 设备发热 = 设备表面温度
目标：< 40°C（< 15°C 高于室温）

超过 42°C：
- 可能触发 CPU 节流（降频）
- 用户体验严重下降
- 用户可能停止游戏
```

---

## 优化目标制定

### 三步制定方法

#### 步骤 1：测量基线
```
1. 不做任何优化，测试当前性能
2. 记录：
   - 目标设备上的平均帧时间
   - GC.Alloc 情况
   - CPU/GPU 占用
   - 设备温度

示例：
低端设备，30 fps 目标，ARPG 游戏
当前测试结果：
- 帧时间：40 ms（目标 33 ms）
- 帧率稳定性：70%（低于 80% 目标）
- 设备温度：41°C（超过 40°C 目标）
```

#### 步骤 2：确定主要瓶颈
```
使用 Profiler 分析：
- CPU 时间占比多少？
- GPU 时间占比多少？
- GC.Alloc 有多大？

从高到低排序，优先处理最大的瓶颈

上例分析：
- CPU：20 ms（50%） - 主要瓶颈
- GPU：15 ms（37.5%） - 次要瓶颈
- GC：5 ms（12.5%） - 偶尔发生

优化优先级：
1. 减少 CPU（目标：15 ms）
2. 减少 GPU（目标：12 ms）
3. 减少 GC（目标：< 100 KB）
```

#### 步骤 3：制定具体目标
```
从 40 ms 优化到 33 ms（目标），需要：
- 总减少：7 ms
- 减少比例：17.5%

根据瓶颈分配目标：
- CPU：从 20 ms → 14 ms（减少 6 ms）
- GPU：从 15 ms → 14 ms（减少 1 ms）
- GC：避免

预期效果：
- 帧率稳定性：70% → 95%+
- 设备温度：41°C → 38°C
- 用户体验：可接受 → 良好
```

### 目标制定模板

```
项目：[游戏名]
设备：[目标设备]
游戏类型：[ARPG/FPS/卡牌等]

当前状态：
□ 目标帧率：__ fps
□ 当前帧时间：__ ms
□ CPU 时间：__ ms
□ GPU 时间：__ ms
□ GC.Alloc：__ KB/frame
□ 设备温度：__ °C

优化目标：
□ 帧时间 from __ ms to __ ms
□ CPU 时间 from __ ms to __ ms
□ GPU 时间 from __ ms to __ ms
□ GC.Alloc from __ KB to __ KB
□ 设备温度 from __ °C to __ °C

优化方案：
□ [方案 1]
□ [方案 2]
□ [方案 3]

预期收益：
□ 帧率稳定性提升 __ %
□ CPU 减少 __ %
□ GPU 减少 __ %
□ 温度降低 __ °C
```

---

## 测试设备清单

### 推荐的测试设备矩阵

#### 最小覆盖（3 款设备）

```
低端代表（2GB）：
- 小米 Redmi Note 7 / Note 8（Android）
- 或 iPhone SE（第一代）（iOS）

中端代表（4-6GB）：
- 小米 10 / 红米 K30（Android）
- 或 iPhone 11 / 12（iOS）

高端代表（8GB+）：
- 小米 12 / 三星 S22（Android）
- 或 iPhone 13 / 14（iOS）
```

#### 标准覆盖（6 款设备）

```
Android 低端：
- 骁龙 600 系列（红米 Note 7）
- 骁龙 700 系列（红米 K20）

Android 中端：
- 骁龙 800 系列（小米 10）
- 骁龙 865（小米 11）

Android 高端：
- 骁龙 8 Gen 1（小米 12）
- 骁龙 8 Gen 2（小米 13）

iOS 低端：
- iPhone SE（第一代）

iOS 中端：
- iPhone 11 / 12

iOS 高端：
- iPhone 13 / 14
```

### 测试条件

```
环境条件：
□ 室温：22-25°C
□ 没有其他应用在运行
□ 后台应用已关闭
□ 设备电量 > 50%
□ 设备初始温度：正常（不是刚使用完）

测试流程：
□ 启动游戏，等待 30 秒稳定
□ 进入测试场景
□ 运行 60 秒，录制 Profiler 数据
□ 记录最后 30 秒的平均数据

重复：
□ 对每个设备进行 3 次测试，取平均值
□ 如果某次明显不同（> 20% 差异），调查原因
```

---

## 性能评分体系

### 评分标准

```
帧率稳定性（0-40 分）：
- > 95%：40 分（A）
- 80-95%：30 分（B）
- 60-80%：20 分（C）
- < 60%：10 分（D）

卡顿情况（0-30 分）：
- 无卡顿：30 分（A）
- 偶尔（< 5%）：20 分（B）
- 经常（5-20%）：10 分（C）
- 频繁（> 20%）：0 分（D）

发热情况（0-20 分）：
- < 38°C：20 分（A）
- 38-40°C：15 分（B）
- 40-42°C：10 分（C）
- > 42°C：0 分（D）

内存管理（0-10 分）：
- GC.Alloc < 50 KB：10 分（A）
- 50-100 KB：8 分（B）
- 100-150 KB：5 分（C）
- > 150 KB：0 分（D）

总分 = 帧率 + 卡顿 + 发热 + 内存

等级划分：
90-100 分：优秀（A）
80-89 分：良好（B）
70-79 分：可接受（C）
< 70 分：需要改进（D）
```

### 评分例子

```
低端设备上的 30 fps ARPG：
- 帧率稳定性：92% → 36 分
- 卡顿：2% → 20 分
- 发热：39°C → 15 分
- 内存：80 KB/frame → 8 分
- 总分：79 分 → C 等级（可接受）

但根据优化目标：
- 目标：帧率稳定性 > 95% → A 级
- 目标：发热 < 38°C → A 级
- 总分目标：85 分+ → B 级

改进方案后（优化后）：
- 帧率稳定性：97% → 40 分
- 卡顿：1% → 30 分
- 发热：37°C → 20 分
- 内存：50 KB/frame → 10 分
- 总分：100 分 → A 级
```

---

## 快速参考：常见游戏的性能标准

### 休闲卡牌游戏
- 帧率：30 fps（菜单）、60 fps（滑动）
- GC.Alloc：< 100 KB
- 温度：< 40°C
- 低端机：完全支持

### 中重度 ARPG
- 帧率：60 fps（必须）
- 帧率稳定性：> 95%
- GC.Alloc：< 100 KB
- 温度：< 40°C
- 低端机：30 fps 降级版本

### 快节奏 FPS
- 帧率：60+ fps（最低 60）
- 帧率稳定性：> 98%
- 输入延迟：< 30 ms
- GC 暂停：< 5 ms
- 低端机：不支持或严格降级

### 大世界开放游戏
- 帧率：30-60 fps（可动态调整）
- 帧率稳定性：> 90%
- 流畅加载：< 3 秒
- 温度：< 42°C
- 低端机：缩小场景规模或固定 30 fps

