---
description: å¯¹æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ä»£ç æ–‡ä»¶è¿›è¡Œæ‰¹é‡åˆ†æå’Œä¼˜åŒ–
---

# /optimize-folder - æ–‡ä»¶å¤¹ä¼˜åŒ–

å¯¹æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ä»£ç æ–‡ä»¶è¿›è¡Œæ‰¹é‡åˆ†æå’Œä¼˜åŒ–ã€‚

## ç”¨æ³•

```
/optimize-folder <folder-path>
```

### å‚æ•°

- `<folder-path>` - è¦ä¼˜åŒ–çš„æ–‡ä»¶å¤¹è·¯å¾„
  - ç¤ºä¾‹ï¼š`/optimize-folder Assets/Scripts/Managers`
  - ç¤ºä¾‹ï¼š`/optimize-folder src/components`
  - ç¤ºä¾‹ï¼š`/optimize-folder .` (å½“å‰ç›®å½•)

### å¯é€‰å‚æ•°

```
/optimize-folder <folder-path> --recursive
/optimize-folder <folder-path> --exclude-tests
/optimize-folder <folder-path> --format=report|code
```

## åŠŸèƒ½æè¿°

å¯¹æ–‡ä»¶å¤¹å†…çš„æ‰€æœ‰ä»£ç è¿›è¡Œæ‰¹é‡åˆ†æå’Œä¼˜åŒ–å»ºè®®ï¼š

### 1. **æ‰¹é‡ä»£ç åˆ†æ**
   - åˆ†ææ–‡ä»¶å¤¹å†…æ‰€æœ‰æ–‡ä»¶
   - æŒ‰æ–‡ä»¶ã€å‡½æ•°ã€ç±»è¿›è¡Œè¯„åˆ†
   - è¯†åˆ«çƒ­ç‚¹é—®é¢˜

### 2. **ä¸€è‡´æ€§æ£€æŸ¥**
   - å‘½åçº¦å®šç»Ÿä¸€æ€§
   - ä»£ç é£æ ¼ä¸€è‡´æ€§
   - æ¨¡å¼ä½¿ç”¨ä¸€è‡´æ€§
   - æ–‡æ¡£é£æ ¼ç»Ÿä¸€æ€§

### 3. **è·¨æ–‡ä»¶ä¼˜åŒ–**
   - è¯†åˆ«é‡å¤ä»£ç 
   - æè®®æå–å…±äº«æ¨¡å—
   - å»ºè®®ç»§æ‰¿å…³ç³»
   - å‘ç°æ¥å£æœºä¼š

### 4. **æ€§èƒ½å¯¹æ ‡**
   - æ€§èƒ½çƒ­ç‚¹æ–‡ä»¶æ’åº
   - å¤æ‚åº¦åˆ†å¸ƒ
   - å†…å­˜å ç”¨åˆ†æ

### 5. **æ–‡ä»¶å¤¹çº§åˆ«ä¼˜åŒ–**
   - å­æ–‡ä»¶å¤¹ç»„ç»‡å»ºè®®
   - æ–‡ä»¶åˆ†ç±»å»ºè®®
   - ä¾èµ–å…³ç³»å¯è§†åŒ–

## è¾“å‡ºç¤ºä¾‹

```
### Folder Optimization Report: Assets/Scripts/Managers

#### åˆ†ææ‘˜è¦
- æ–‡ä»¶æ•°: 12
- ä»£ç è¡Œæ•°: 8,960 è¡Œ
- å¹³å‡æ–‡ä»¶å¤§å°: 746 è¡Œ
- æ‰«ææ—¶é—´: 2.3s

#### æ•´ä½“è¯„åˆ†

| ç»´åº¦ | å¾—åˆ† | çŠ¶æ€ | æ”¹å–„ç©ºé—´ |
|------|------|------|---------|
| ä»£ç è´¨é‡ | 6.5/10 | âš ï¸ | é«˜ |
| æ€§èƒ½ | 5.8/10 | âš ï¸ | é«˜ |
| è§„èŒƒ | 7.2/10 | âœ“ | ä¸­ |
| ä¸€è‡´æ€§ | 6.0/10 | âš ï¸ | é«˜ |
| **æ€»ä½“** | **6.4/10** | | |

---

## è¯¦ç»†åˆ†ææŠ¥å‘Š

### ğŸ“Š æ–‡ä»¶è¯„åˆ†è¡¨

| æ–‡ä»¶å | è¡Œæ•° | å¤æ‚åº¦ | è´¨é‡ | æ€§èƒ½ | è§„èŒƒ | ä¼˜å…ˆçº§ |
|--------|------|--------|------|------|------|--------|
| GameManager.cs | 1,250 | 9.2 | 5/10 | 4/10 | 6/10 | ğŸ”´ |
| UIManager.cs | 890 | 7.8 | 6/10 | 6/10 | 7/10 | ğŸŸ¡ |
| EventManager.cs | 450 | 5.2 | 8/10 | 8/10 | 8/10 | ğŸŸ¢ |
| SaveManager.cs | 680 | 6.5 | 7/10 | 7/10 | 7/10 | ğŸŸ¢ |
| AudioManager.cs | 520 | 4.8 | 7/10 | 8/10 | 8/10 | ğŸŸ¢ |
| ... | ... | ... | ... | ... | ... | ... |

---

### ğŸ”´ é«˜ä¼˜å…ˆçº§é—®é¢˜

#### é—®é¢˜ 1: GameManager.cs æ–‡ä»¶è¿‡å¤§ (1,250 è¡Œ)
```
æ–‡ä»¶å¤§å°åˆ†å¸ƒï¼š
GameManager.cs    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 1,250 è¡Œ (æå¤§)
UIManager.cs      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 890 è¡Œ (å¤§)
EventManager.cs   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 450 è¡Œ (ä¸­)
SaveManager.cs    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ 680 è¡Œ (ä¸­)
AudioManager.cs   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ 520 è¡Œ (ä¸­)
```

**æ”¹è¿›å»ºè®®ï¼š**
```
æè®®æ‹†åˆ†ä¸ºï¼š
GameManager.cs (ä¸»å…¥å£, 250 è¡Œ)
  â”œâ”€ GameStateManager.cs (æ¸¸æˆçŠ¶æ€, 300 è¡Œ)
  â”œâ”€ GameInitializer.cs (åˆå§‹åŒ–, 200 è¡Œ)
  â””â”€ GameController.cs (æ¸¸æˆæµç¨‹, 200 è¡Œ)

é¢„æœŸæ”¶ç›Šï¼š
- ä»£ç è¡Œæ•°å‡è¡¡åŒ–
- å•ä¸€èŒè´£åŸåˆ™æ›´å¥½
- å¯ç»´æŠ¤æ€§æå‡ 40%
```

---

#### é—®é¢˜ 2: å‘½åé£æ ¼ä¸ä¸€è‡´ (3 ç§æ··åˆ)
```
å‘ç°çš„é—®é¢˜ï¼š
âœ— GameManager._eventManager ç§æœ‰å­—æ®µ (_camelCase, æ­£ç¡®)
âœ— GameManager.eventManager å±æ€§ (camelCase, é”™è¯¯)
âœ— GameManager.EventManager å±æ€§ (PascalCase, ä¸ä¸€è‡´)

å½±å“èŒƒå›´: 8 ä¸ªæ–‡ä»¶, 42 å¤„ä¸ä¸€è‡´

ç»Ÿä¸€å»ºè®®:
- ç§æœ‰å­—æ®µ: _camelCase
- å…¬å…±å±æ€§: PascalCase
- æ–¹æ³•: PascalCase
- å¸¸é‡: UPPER_CASE
```

å·¥ä½œé‡: 2-3 å°æ—¶ (ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·)

---

#### é—®é¢˜ 3: æ–‡æ¡£ç¼ºå¤± (å½±å“ 45 ä¸ªæ–¹æ³•)
```
æ–‡æ¡£å®Œæ•´æ€§ç»Ÿè®¡ï¼š
GameManager.cs     â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 30% (5 ä¸ªæ–¹æ³•)
UIManager.cs       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 60% (8 ä¸ªæ–¹æ³•)
EventManager.cs    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% (12 ä¸ªæ–¹æ³•)
SaveManager.cs     â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 40% (6 ä¸ªæ–¹æ³•)
...

å»ºè®®ä¼˜å…ˆè¡¥å……:
1. æ‰€æœ‰å…¬å…±æ–¹æ³• (45 ä¸ª)
2. å¤æ‚ç±» (GameManager, UIManager)
3. å…³é”®æœåŠ¡ (SaveManager, EventManager)
```

å·¥ä½œé‡: 3-4 å°æ—¶

---

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§é—®é¢˜

#### é—®é¢˜ 4: é‡å¤ä»£ç æ£€æµ‹

**é‡å¤æ¨¡å¼ 1: åˆå§‹åŒ–éªŒè¯** (3 å¤„é‡å¤)
```csharp
// GameManager.cs, UIManager.cs, SaveManager.cs ä¸­éƒ½æœ‰
if (instance != null && instance != this) {
    Destroy(gameObject);
    return;
}
instance = this;
DontDestroyOnLoad(gameObject);
```

**æè®®æ”¹è¿›:**
åˆ›å»º SingletonBehaviour åŸºç±»
```csharp
public abstract class SingletonBehaviour<T> : MonoBehaviour
    where T : SingletonBehaviour<T>
{
    protected static T instance;

    protected virtual void Awake() {
        if (instance != null && instance != this) {
            Destroy(gameObject);
            return;
        }
        instance = this;
        DontDestroyOnLoad(gameObject);
    }
}
```

é¢„æœŸæ”¶ç›Š: æ¶ˆé™¤é‡å¤ä»£ç , æ”¹è¿› 3 ä¸ªç±»

---

**é‡å¤æ¨¡å¼ 2: äº‹ä»¶è®¢é˜…/å–æ¶ˆ** (8 å¤„é‡å¤)
```csharp
// æ¨¡å¼é‡å¤åœ¨ EventManager.cs å’Œå¤šä¸ªç›‘å¬å™¨ä¸­
EventManager.Subscribe(eventName, callback);
// ...
EventManager.Unsubscribe(eventName, callback);
```

å»ºè®®: åˆ›å»º EventListener åŒ…è£…ç±»æˆ–ä½¿ç”¨ Action å§”æ‰˜

---

#### é—®é¢˜ 5: æ€§èƒ½çƒ­ç‚¹

| æ–‡ä»¶ | çƒ­ç‚¹é—®é¢˜ | å½±å“ | å»ºè®® |
|------|---------|------|------|
| GameManager.cs | Update ä¸­è¿›è¡Œ LINQ æŸ¥è¯¢ | å¸§ç‡æ³¢åŠ¨ | ç¼“å­˜ç»“æœ |
| UIManager.cs | é¢‘ç¹åˆ›å»º UI å…ƒç´  | å†…å­˜æŠ–åŠ¨ | å¯¹è±¡æ±  |
| SaveManager.cs | ä¸»çº¿ç¨‹ I/O æ“ä½œ | å¡é¡¿ | å¼‚æ­¥åŠ è½½ |

é¢„æœŸæ”¶ç›Š: æ€§èƒ½æå‡ 15-25%

---

#### é—®é¢˜ 6: å¼‚å¸¸å¤„ç†ä¸ä¸€è‡´
```
ç¼ºå°‘å¼‚å¸¸å¤„ç†çš„å…³é”®æ–¹æ³•ï¼š
- SaveManager.Save() (12 å¤„è°ƒç”¨)
- AudioManager.PlayClip() (25 å¤„è°ƒç”¨)
- UIManager.ShowPanel() (18 å¤„è°ƒç”¨)

å»ºè®®: ä¸ºè¿™ 3 ä¸ªç±»æ·»åŠ å®Œæ•´çš„å¼‚å¸¸å¤„ç†
```

å·¥ä½œé‡: 2-3 å°æ—¶

---

### ğŸŸ¢ ä½ä¼˜å…ˆçº§é—®é¢˜

#### é—®é¢˜ 7: æ³¨é‡Šè´¨é‡
- EventManager.cs: ä¼˜ç§€ (è¯¦ç»†æ³¨é‡Š)
- SaveManager.cs: è‰¯å¥½ (åŸºç¡€æ³¨é‡Š)
- GameManager.cs: ä¸€èˆ¬ (ç¼ºå°‘å¤æ‚é€»è¾‘è¯´æ˜)

å»ºè®®: å¢å¼º GameManager çš„æ³¨é‡Šè¯´æ˜

---

## è·¨æ–‡ä»¶åˆ†æ

### ä¾èµ–å…³ç³»å›¾

```
GameManager
â”œâ”€ UIManager
â”œâ”€ SaveManager
â”œâ”€ EventManager
â”œâ”€ AudioManager
â””â”€ InputManager

å¾ªç¯ä¾èµ–é£é™©: æ— 

ä¾èµ–å±‚çº§:
Level 4 (é¡¶å±‚)
  GameManager â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  UIManager â”€â”€â”€â”€â”€â”€â”       â”‚
  SaveManager â”€â”€â”€â”€â”¤       â”‚
  AudioManager â”€â”€â”€â”¤ EventManager
  InputManager â”€â”€â”€â”˜       â”‚
Level 3 (æ ¸å¿ƒ)            â”‚
  EventManager â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è¯„ä¼°:** âœ“ è‰¯å¥½ï¼Œæ— å¾ªç¯ä¾èµ–

---

### æ¥å£æè®®

è¯†åˆ«åˆ° 3 ä¸ªå¯ä»¥æå–ä¸ºæ¥å£çš„æ¨¡å¼ï¼š

```csharp
// å»ºè®® 1: å­˜å‚¨æ¥å£
IStorage {
    void Save(string key, object data);
    T Load<T>(string key);
    void Delete(string key);
}

// å»ºè®® 2: éŸ³é¢‘ç®¡ç†æ¥å£
IAudioManager {
    void Play(string clipName);
    void Stop(string clipName);
    void SetVolume(float volume);
}

// å»ºè®® 3: UI ç®¡ç†æ¥å£
IUIManager {
    void ShowPanel(string panelName);
    void HidePanel(string panelName);
    T GetPanel<T>(string panelName) where T : UIPanel;
}
```

é¢„æœŸæ”¶ç›Š: æé«˜å¯æµ‹è¯•æ€§å’Œå¯æ‰©å±•æ€§

---

## ä¸€è‡´æ€§å¯¹æ ‡

### å‘½åçº¦å®šå¯¹æ ‡

```
ç°çŠ¶:
âœ“ ç±»å: PascalCase (100% æ­£ç¡®)
âœ“ æ–¹æ³•å: PascalCase (98% æ­£ç¡®)
~ ç§æœ‰å­—æ®µ: æ··åˆ _camelCase/camelCase (62% æ­£ç¡®)
âœ— å¸¸é‡: æ··åˆ UPPER_CASE/PascalCase (45% æ­£ç¡®)
âœ— å±æ€§: ä¸ä¸€è‡´ (55% æ­£ç¡®)

æ”¹å–„ç©ºé—´: 38%
```

### ä»£ç é£æ ¼å¯¹æ ‡

```
ç¼©è¿›: âœ“ ç»Ÿä¸€ (4 ç©ºæ ¼)
æ‹¬å·: âœ“ ç»Ÿä¸€ (Allman é£æ ¼)
å‘½åé•¿åº¦: âœ“ åˆç† (æ–¹æ³•å¹³å‡ 18 å­—ç¬¦)
è¡Œé•¿: ~ å¹³å‡ 92 å­—ç¬¦ (å»ºè®® â‰¤ 100)
```

---

## ä¼˜åŒ–å»ºè®®ä¼˜å…ˆçº§

### ç«‹å³æ‰§è¡Œ (æœ¬å‘¨)
1. æ‹†åˆ† GameManager.cs (é«˜ä¼˜å…ˆçº§, é«˜æ”¶ç›Š)
2. ç»Ÿä¸€å‘½åçº¦å®š (é«˜ä¼˜å…ˆçº§, ä¸­æ”¶ç›Š)
3. è¡¥å……å…³é”®æ–‡æ¡£ (ä¸­ä¼˜å…ˆçº§, ä¸­æ”¶ç›Š)

**é¢„æœŸå‘¨æœŸ:** 2-3 å¤©
**é¢„æœŸè¯„åˆ†æå‡:** 6.4/10 â†’ 7.2/10

---

### æœ¬æœˆå¤„ç†
4. æå– SingletonBehaviour åŸºç±» (ä¸­ä¼˜å…ˆçº§, ä¸­æ”¶ç›Š)
5. æ·»åŠ å¼‚å¸¸å¤„ç† (ä¸­ä¼˜å…ˆçº§, ä½æ”¶ç›Š)
6. æ€§èƒ½ä¼˜åŒ– (ä¸­ä¼˜å…ˆçº§, é«˜æ”¶ç›Š)

**é¢„æœŸå‘¨æœŸ:** 1 å‘¨
**é¢„æœŸè¯„åˆ†æå‡:** 7.2/10 â†’ 8.1/10

---

### ä¸‹æœˆæ”¹è¿›
7. æ·»åŠ æ¥å£æŠ½è±¡ (ä½ä¼˜å…ˆçº§, ä¸­æ”¶ç›Š)
8. å®Œæ•´ä»£ç é£æ ¼ç»Ÿä¸€ (ä½ä¼˜å…ˆçº§, ä½æ”¶ç›Š)

**é¢„æœŸå‘¨æœŸ:** éšæœºæ”¹è¿›
**é¢„æœŸè¯„åˆ†æå‡:** 8.1/10 â†’ 8.5/10

---

## å¯¹æ¯”æ•°æ®

### ä¼˜åŒ–å‰åå¯¹æ ‡

| æŒ‡æ ‡ | å‰ | å | æå‡ |
|------|-----|-----|------|
| å¹³å‡æ–‡ä»¶å¤§å° | 746 è¡Œ | 450 è¡Œ | â†“ 40% |
| ä»£ç å¤æ‚åº¦ | 6.9 | 5.2 | â†“ 25% |
| æ–‡æ¡£è¦†ç›–ç‡ | 65% | 95% | â†‘ 30% |
| ä»£ç ä¸€è‡´æ€§ | 62% | 95% | â†‘ 33% |
| æ€§èƒ½ | 5.8/10 | 7.5/10 | â†‘ 30% |
| **æ€»ä½“è¯„åˆ†** | 6.4/10 | 8.0/10 | â†‘ 25% |

---

## æ‰§è¡ŒæŒ‡å—

### æ–¹å¼ 1: ä¸€æ¬¡æ€§å…¨é¢ä¼˜åŒ–
```
1. ç”Ÿæˆå®Œæ•´ä¼˜åŒ–å»ºè®® (/optimize-folder)
2. ä¼˜åŒ–é«˜ä¼˜å…ˆçº§æ–‡ä»¶ (/optimize-file)
3. æäº¤æ‰€æœ‰æ”¹è¿›
```

### æ–¹å¼ 2: æ¸è¿›å¼ä¼˜åŒ–
```
å‘¨æœŸ 1: æ‰§è¡Œ P0 ä¼˜åŒ–
å‘¨æœŸ 2: æ‰§è¡Œ P1 ä¼˜åŒ–
å‘¨æœŸ 3: æ‰§è¡Œ P2 ä¼˜åŒ–
```

**æ¨è: æ–¹å¼ 1ï¼ˆå¿«é€Ÿè§æ•ˆï¼‰**

---

## ç›¸å…³å‘½ä»¤

- `/review` - å®¡æŸ¥å…·ä½“æ–‡ä»¶
- `/optimize-file` - ä¼˜åŒ–å•ä¸ªæ–‡ä»¶
- `/optimize-project` - æ•´ä¸ªé¡¹ç›®ä¼˜åŒ–è§„åˆ’

## ä¸‹ä¸€æ­¥

é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„æ–‡ä»¶ï¼Œä½¿ç”¨ `/optimize-file` ç”Ÿæˆå…·ä½“æ”¹è¿›ä»£ç ã€‚

ç¤ºä¾‹:
```
/optimize-file Assets/Scripts/Managers/GameManager.cs
```
```

## ä¸å…¶ä»–åŠŸèƒ½çš„å…³ç³»

- **ä¸ `/review` çš„å…³ç³»ï¼š** æ–‡ä»¶å¤¹çº§å®¡æŸ¥
- **ä¸ `/optimize-file` çš„å…³ç³»ï¼š** æ‰¹é‡æ–‡ä»¶çš„èšåˆ
- **ä¸ `/optimize-project` çš„å…³ç³»ï¼š** æ›´ç»†ç²’åº¦çš„åˆ†æ

## å¸¸è§ç”¨æ³•

### ä¼˜åŒ– Managers æ–‡ä»¶å¤¹
```
/optimize-folder Assets/Scripts/Managers
```

### ä¼˜åŒ– UI æ¨¡å—
```
/optimize-folder Assets/Scripts/UI --recursive
```

### è·å–å¿«é€Ÿæ€»ç»“
```
/optimize-folder Assets/Scripts --format=summary
```

### æ’é™¤æµ‹è¯•æ–‡ä»¶
```
/optimize-folder Assets/Scripts --exclude-tests
```

## è¾“å‡ºé€‰é¡¹

- âœ“ å®Œæ•´åˆ†ææŠ¥å‘Š
- âœ“ æ¯ä¸ªæ–‡ä»¶çš„è¯„åˆ†å’Œæ’åº
- âœ“ è·¨æ–‡ä»¶é‡å¤ä»£ç æ£€æµ‹
- âœ“ ä¸€è‡´æ€§å¯¹æ ‡å’Œæ”¹å–„å»ºè®®
- âœ“ ä¼˜å…ˆçº§æ’åºçš„æ”¹è¿›æ¸…å•
- âœ“ å¿«é€Ÿæ€»ç»“ï¼ˆå¯é€‰ï¼‰

## å¤‡æ³¨

- éµå¾ªé¡¹ç›®çš„ CLAUDE.md è§„èŒƒ
- è‡ªåŠ¨æ£€æµ‹æ–‡ä»¶ç±»å‹åº”ç”¨ç›¸åº”è§„èŒƒ
- å¯¹äº Unity é¡¹ç›®ï¼Œç‰¹åˆ«å…³æ³¨æ€§èƒ½å’Œæ¶æ„
- æ”¯æŒé€’å½’æ‰«æå­æ–‡ä»¶å¤¹
- è¾“å‡ºå¯ç”¨äºå›¢é˜Ÿè®¨è®ºå’Œè§„åˆ’
